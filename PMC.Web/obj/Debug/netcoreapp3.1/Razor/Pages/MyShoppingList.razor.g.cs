#pragma checksum "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "c3527a655162e8884c9da01fd4991115517216a6"
// <auto-generated/>
#pragma warning disable 1591
namespace PMC.Web.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using PMC.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using PMC.Web.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
using PMC.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
using PMC.DataModel;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
using PMC.Web.Data;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/myshoppinglist")]
    public partial class MyShoppingList : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "align", "right");
            __builder.AddMarkupContent(2, "\r\n    ");
            __builder.OpenElement(3, "button");
            __builder.AddAttribute(4, "style", " font-size:14px; background-color:white; border-width:0px; border-color:white");
            __builder.AddAttribute(5, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 9 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                                                                                             OpenModal

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(6, "Help");
            __builder.CloseElement();
            __builder.AddMarkupContent(7, "\r\n    ");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "align", "left");
            __builder.AddMarkupContent(10, "\r\n        ");
            __builder.OpenComponent<PMC.Web.Pages.BlazorModal>(11);
            __builder.AddAttribute(12, "Title", "Print Your Shopping List");
            __builder.AddAttribute(13, "IsOpened", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 11 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                                                isOpened

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "ModalBody", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(15, "\r\n                ");
                __builder2.AddMarkupContent(16, "<div>Each meal is assigned a date it will be served.  The Shopping List uses scheduled date of each meal to choose the ingredients, and their quantity, that appear on the shopping list. </div>\r\n                ");
                __builder2.AddMarkupContent(17, "<div style=\"padding-top:7px;padding-bottom:3px\">When the Shopping List is first opened, the Start Date is today, and the End Date is 7 days from today. This assumes you are going to shop for the week ahead.</div>\r\n                ");
                __builder2.AddMarkupContent(18, "<div style=\"padding-bottom:3px; padding-left:10px\">You can change these fields to the desired date range. Just make sure the End date is the same as, or after, the start date.</div>\r\n                ");
                __builder2.AddMarkupContent(19, "<div style=\"padding-bottom:3px;\">Click <b>Generate List</b> to generate the shopping list.</div>\r\n                ");
                __builder2.AddMarkupContent(20, @"<div style=""padding-bottom:3px; padding-left:10px; padding-top:0px"">The shopping list sorts by <b>Food Category</b> then by <b>Ingredient Description</b>. The list is sorted in this manner since items of the same category are usually grouped together at the store.</div>
            ");
            }
            ));
            __builder.AddAttribute(21, "ModalFooter", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(22, "\r\n            ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(23, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(24, "\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(25, "\r\n\r\n");
            __builder.AddMarkupContent(26, "<h3>My Shopping List</h3>\r\n");
#nullable restore
#line 26 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
 if (SelectedMealService.MealCount == 0)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(27, "    ");
            __builder.AddMarkupContent(28, "<p>A shopping list cannot be generated until you have created at least one meal.  . If you are new to PMC, select <b>Help</b> in the navigation area for instructions.</p>\r\n");
#nullable restore
#line 29 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(29, "\r\n");
#nullable restore
#line 31 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
 if (SelectedMealService.MealCount != 0)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(30, "    ");
            __builder.OpenElement(31, "table");
            __builder.AddAttribute(32, "style", "font-size:14px");
            __builder.AddMarkupContent(33, "\r\n        ");
            __builder.AddMarkupContent(34, "<tr>\r\n            <th width=\"15%\">Start Date </th>\r\n            <th width=\"15%\">End Date</th>\r\n            <th width=\"5%\"></th>\r\n            <th width=\"65%\"></th>\r\n        </tr>\r\n        ");
            __builder.OpenElement(35, "tr");
            __builder.AddMarkupContent(36, "\r\n            ");
            __builder.OpenElement(37, "td");
            __builder.OpenElement(38, "input");
            __builder.AddAttribute(39, "id", "dateStart");
            __builder.AddAttribute(40, "type", "date");
            __builder.AddAttribute(41, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 41 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                              dateBegin

#line default
#line hidden
#nullable disable
            , format: "yyyy-MM-dd", culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(42, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => dateBegin = __value, dateBegin, format: "yyyy-MM-dd", culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(43, "\r\n            ");
            __builder.OpenElement(44, "td");
            __builder.OpenElement(45, "input");
            __builder.AddAttribute(46, "id", "dateEnd");
            __builder.AddAttribute(47, "type", "date");
            __builder.AddAttribute(48, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 42 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                            dateEnd

#line default
#line hidden
#nullable disable
            , format: "yyyy-MM-dd", culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(49, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => dateEnd = __value, dateEnd, format: "yyyy-MM-dd", culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\r\n            ");
            __builder.OpenElement(51, "td");
            __builder.OpenElement(52, "input");
            __builder.AddAttribute(53, "id", "btnGetShoppingList");
            __builder.AddAttribute(54, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 43 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                                         GetShoppingList

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(55, "type", "button");
            __builder.AddAttribute(56, "value", "Generate List");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(57, "\r\n            <td></td>\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(58, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(59, "\r\n    <hr>\r\n");
#nullable restore
#line 48 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
}

#line default
#line hidden
#nullable disable
#nullable restore
#line 49 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
 if (shoppingListCount != 0)
{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(60, "div");
            __builder.AddAttribute(61, "class", "grid-two-thirds");
            __builder.AddMarkupContent(62, "\r\n    ");
            __builder.OpenElement(63, "div");
            __builder.AddAttribute(64, "class", "grid-two-thirds-1 display-rows");
            __builder.AddMarkupContent(65, "\r\n        ");
            __builder.OpenElement(66, "table");
            __builder.AddAttribute(67, "class", "meals");
            __builder.AddMarkupContent(68, "\r\n            ");
            __builder.AddMarkupContent(69, @"<tr style=""border:solid; border-width:.5px; border-color:#ddd"">
                <th width=""2%""><span class=""oi oi-check""></span></th>
                <th width=""17%"" style=""border-right:0px; border-left:0px"">Food Category</th>
                <th width=""5%"" style=""text-align:right; border-left:0px; padding-right:10px ; border-right:0px"">Qty</th>
                <th width=""10%"" style=""padding-left:5px; border-right:0px; border-left:0px"">UoM</th>
                <th width=""67%"" style=""padding-left:5px; border-left:0px"">Description</th>
            </tr>
");
#nullable restore
#line 61 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
             foreach (var list in shoppingList)
            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(70, "                ");
            __builder.OpenElement(71, "tr");
            __builder.AddAttribute(72, "style", "border:solid; border-width:.5px; border-color:#ddd");
            __builder.AddMarkupContent(73, "\r\n                    <td style=\"border-right:solid; border-color:#ddd; border-width:.5px;\"></td>\r\n                    ");
            __builder.OpenElement(74, "td");
            __builder.AddAttribute(75, "width", "17%");
            __builder.AddAttribute(76, "style", "padding-left:10px");
            __builder.AddContent(77, 
#nullable restore
#line 65 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                                               list.FoodCategoryDescription

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(78, "\r\n                    ");
            __builder.OpenElement(79, "td");
            __builder.AddAttribute(80, "width", "5%");
            __builder.AddAttribute(81, "style", "text-align:right;");
            __builder.AddContent(82, 
#nullable restore
#line 66 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                                              list.IngredientQty

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(83, "\r\n                    ");
            __builder.OpenElement(84, "td");
            __builder.AddAttribute(85, "width", "10%");
            __builder.AddAttribute(86, "style", "padding-left:5px");
            __builder.AddContent(87, 
#nullable restore
#line 67 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                                              list.UnitOfMeasureDescription

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(88, "\r\n                    ");
            __builder.OpenElement(89, "td");
            __builder.AddAttribute(90, "width", "67%");
            __builder.AddAttribute(91, "style", "padding-left:10px");
            __builder.AddContent(92, 
#nullable restore
#line 68 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                                               list.IngredientDescription

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(93, " ");
            __builder.AddContent(94, 
#nullable restore
#line 68 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                                                                                           list.IngredientCondition

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(95, " ");
            __builder.CloseElement();
            __builder.AddMarkupContent(96, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(97, "\r\n");
#nullable restore
#line 70 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(98, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(99, "\r\n        ");
            __builder.AddMarkupContent(100, "<p>This is the end of your shopping list.  Press Ctrl and P together to print your shopping list.</p>\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(101, "\r\n    ");
            __builder.OpenElement(102, "div");
            __builder.AddAttribute(103, "class", "grid-two-thirds-2");
            __builder.AddAttribute(104, "style", "border:solid; border-width:.5px; border-color:#ddd; padding-left:10px");
            __builder.AddMarkupContent(105, "\r\n        ");
            __builder.AddMarkupContent(106, "<div><h5>Recipes included in this Shopping List</h5></div>\r\n");
#nullable restore
#line 76 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
         foreach (var list in recipes)
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(107, "            ");
            __builder.OpenElement(108, "div");
            __builder.AddContent(109, " -- ");
            __builder.AddContent(110, 
#nullable restore
#line 78 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
                      list.RecipeName

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(111, "\r\n");
#nullable restore
#line 79 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(112, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(113, "\r\n    <br>\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(114, "\r\n");
#nullable restore
#line 83 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(115, "\r\n\r\n\r\n\r\n");
#nullable restore
#line 88 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
     if (errmsg == true)
    {


#line default
#line hidden
#nullable disable
            __builder.AddContent(116, "        ");
            __builder.AddMarkupContent(117, @"<table style=""background-color:lightcoral; width:200px; padding-left:15px"">
            <tr>
                <td>
                    Uh oh!  Your Start Date is greater than your End Date.
                    The Start Date must be a date that is equal to, or before the End Date.
                </td>
            </tr>

        </table>
");
#nullable restore
#line 100 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"

    }

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 103 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyShoppingList.razor"
           

        [Inject]
        private RepoFactory repoFactory { get; set; }

        protected DateTime dateBegin = DateTime.Today;
        protected DateTime dateEnd = DateTime.Now.AddDays(7);
        protected int userID;
        protected List<ShoppingList> shoppingList = new List<ShoppingList>();
        protected List<ShoppingList> recipes = new List<ShoppingList>();
        protected int recipeCount = 0;
        protected List<FoodCategory> foodCategories = new List<FoodCategory>();
        protected int shoppingListCount = 0;
        protected bool errmsg = false;
        protected DateTime tempDateBegin;
        protected DateTime tempDateEnd;

#pragma warning disable 1998
        protected override async Task OnInitializedAsync()
        {
            userID = repoFactory.UserID;
        }
#pragma warning restore 1998

        //PMC1054-02 PMC1054-03 PMC1054-04 PMC1054-05 PMC1092-35
        public void GetShoppingList()
        {
            shoppingListCount = 0;
            errmsg = false;
            StateHasChanged();
            checkDate();
            if (errmsg == false)
            {
                var repo = repoFactory.Get<PMC.Data.ShoppingListRepo>();
                shoppingList = repo.GetShoppingListByUserIDDateRange(userID, dateBegin, dateEnd).ToList();
                shoppingListCount = shoppingList.Count();
                recipes = repo.GetShoppingListRecipesByUserIDDateRange(userID, dateBegin, dateEnd).ToList();
                recipeCount = recipes.Count();
                StateHasChanged();

                var repoFc = repoFactory.Get<PMC.Data.FoodCategoryRepo>();
                foodCategories = repoFc.GetShoppingListFoodCateogoriesByUserIDMealDateRange(userID, dateBegin, dateEnd).ToList();
                StateHasChanged();
                isOpened = false;
            }
            StateHasChanged();
            isOpened = false;
        }


        protected bool isOpened = false;

        void OpenModal()
        {
            isOpened = true;

        }
        void CloseModal()
        {
            isOpened = false;
        }

        private void checkDate()
        {
            if (dateBegin > dateEnd)
            {
                errmsg = true;
                isOpened = false;
                StateHasChanged();
            }
        }



    

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private SelectedMealService SelectedMealService { get; set; }
    }
}
#pragma warning restore 1591
