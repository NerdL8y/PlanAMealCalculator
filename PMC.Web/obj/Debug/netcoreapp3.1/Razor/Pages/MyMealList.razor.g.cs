#pragma checksum "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "ca582a13ba71723da357fdedba912c56d081dd45"
// <auto-generated/>
#pragma warning disable 1591
namespace PMC.Web.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using PMC.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Debora\source\repos\PMC\PMC.Web\_Imports.razor"
using PMC.Web.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
using PMC.Web.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
using PMC.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
using PMC.DataModel;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
using Microsoft.AspNetCore.WebUtilities;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/mymeallist")]
    public partial class MyMealList : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "align", "right");
            __builder.AddMarkupContent(2, "\r\n    ");
            __builder.OpenElement(3, "button");
            __builder.AddAttribute(4, "style", " font-size:14px; background-color:white; border-width:0px; border-color:white");
            __builder.AddAttribute(5, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 11 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                                                                                             OpenModal

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(6, "Help");
            __builder.CloseElement();
            __builder.AddMarkupContent(7, "\r\n    ");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "align", "left");
            __builder.AddMarkupContent(10, "\r\n        ");
            __builder.OpenComponent<PMC.Web.Pages.BlazorModal>(11);
            __builder.AddAttribute(12, "Title", "Your Meal List");
            __builder.AddAttribute(13, "IsOpened", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 13 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                                      isOpened

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "ModalBody", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(15, "\r\n                ");
                __builder2.AddMarkupContent(16, "<p>Your Meal List contains all of your meals. The meals are listed by the meal type, sorted by the meal name, and includes the serving date.</p>\r\n                ");
                __builder2.AddMarkupContent(17, "<p>Click on a meal name to view the details of the meal.</p>\r\n                ");
                __builder2.AddMarkupContent(18, "<p style=\"padding-left:10px\">Once you have selected a meal, you will be able to select <b>My Meal Prep Timeline</b> to view the preparation timeline details.</p>\r\n            ");
            }
            ));
            __builder.AddAttribute(19, "ModalFooter", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddMarkupContent(20, "\r\n            ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(21, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(22, "\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(23, "\r\n");
            __builder.AddMarkupContent(24, "<h3>Meal List</h3>\r\n\r\n");
#nullable restore
#line 26 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
 if (mealList.Count() == 0)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(25, "    ");
            __builder.AddMarkupContent(26, "<p>We could not find any meals. If you are new to PMC, select <b>Help</b> in the navigation area for instructions on how to create a meal.</p>\r\n");
#nullable restore
#line 29 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
}

#line default
#line hidden
#nullable disable
#nullable restore
#line 30 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
 if (mealList.Count() > 0)
{
        

#line default
#line hidden
#nullable disable
            __builder.OpenElement(27, "table");
            __builder.AddAttribute(28, "class", "display-rows");
            __builder.AddMarkupContent(29, "\r\n    ");
            __builder.AddMarkupContent(30, @"<tr class=""meals"">
        <th width=""100px"" style=""text-align:center; vertical-align:middle"">Meal Type</th>
        <th width=""675px"" style=""text-align:left; vertical-align:middle"">Meal Name</th>
        <th width=""75px"" style=""text-align:center; vertical-align:middle""># Guests</th>
        <th width=""100px"" style=""text-align:center; vertical-align:middle"">Date</th>
        <th width=""50px"" style=""text-align:center; vertical-align:middle"">View</th>
    </tr>
");
#nullable restore
#line 41 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
     foreach (var list in mealList)
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(31, "        ");
            __builder.OpenElement(32, "tr");
            __builder.AddMarkupContent(33, "\r\n\r\n            ");
            __builder.OpenElement(34, "td");
            __builder.AddAttribute(35, "align", "center");
            __builder.AddContent(36, 
#nullable restore
#line 45 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                list.MealTypeDesc

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(37, "\r\n            ");
            __builder.OpenElement(38, "td");
            __builder.AddAttribute(39, "style", "padding-left:10px");
            __builder.AddContent(40, 
#nullable restore
#line 46 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                           list.MealName

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(41, "\r\n            ");
            __builder.OpenElement(42, "td");
            __builder.AddAttribute(43, "align", "center");
            __builder.AddAttribute(44, "style", "padding-right:5px");
            __builder.AddContent(45, 
#nullable restore
#line 47 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                                          list.MealGuests

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "\r\n            ");
            __builder.OpenElement(47, "td");
            __builder.AddAttribute(48, "align", "center");
            __builder.AddContent(49, 
#nullable restore
#line 48 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                list.MealDate.ToString("MMM dd")

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\r\n            ");
            __builder.OpenElement(51, "td");
            __builder.AddAttribute(52, "style", "text-align:center; vertical-align:middle; padding-bottom:0px;");
            __builder.AddMarkupContent(53, "\r\n                ");
            __builder.OpenElement(54, "label");
            __builder.AddMarkupContent(55, "\r\n                    ");
            __builder.OpenElement(56, "input");
            __builder.AddAttribute(57, "name", "choiceMealID");
            __builder.AddAttribute(58, "type", "radio");
            __builder.AddAttribute(59, "tabindex", "-1");
            __builder.AddAttribute(60, "value", 
#nullable restore
#line 52 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                   list.MealID

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(61, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 53 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                        () => { SelectedMealService.MealID = list.MealID; }

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(62, "oninput", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 54 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
                                      mealSelect

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(63, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(64, "\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(65, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(66, "\r\n");
#nullable restore
#line 58 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(67, "\r\n<br>\r\n");
#nullable restore
#line 61 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 64 "C:\Users\Debora\source\repos\PMC\PMC.Web\Pages\MyMealList.razor"
       
    [Inject]
    private RepoFactory repoFactory { get; set; }

    private int userID;
    private int mealID;
    protected int MealID { get { return mealID; } set { mealID = value; SelectedMealService.MealID = value; } }
    private int mealCount = 0;
    private int mealTypeCount = 0;
    private int totalDisplayRows;
    private string currentUri;
    private List<Meal> mealBreakfast = new List<Meal>();
    private List<Meal> mealBrunch = new List<Meal>();
    private List<Meal> mealLunch = new List<Meal>();
    private List<Meal> mealDinner = new List<Meal>();
    private List<Meal> mealTypes = new List<Meal>();
    private List<Meal> mealList = new List<Meal>();
    private int countBreakfast = 0;
    private int countBrunch = 0;
    private int countLunch = 0;
    private int countDinner = 0;
    private int breakfastMealType = 1;
    private int brunchMealType = 2;
    private int lunchMealType = 3;
    private int dinnerMealType = 4;

#pragma warning disable 1998
    protected override async Task OnInitializedAsync()
    {

        userID = repoFactory.UserID;

        //Get Meal Info
        var repo = repoFactory.Get<PMC.Data.MealRepo>();
        mealList = repo.GetMealsByUserID(userID).ToList();
        mealCount += mealList.Count();
        getMeals();
        //Get Meal Type info
        var mtrepo = repoFactory.Get<PMC.Data.MealRepo>();
        mealTypes = mtrepo.GetMealTypesForMealsByUserID(userID).ToList();
        mealTypeCount = mealTypes.Count();

        //total number of rows for displaying the meal list
        totalDisplayRows = mealCount + mealTypeCount + 1;

        //Reset the Selected Meal ID in case user clicks the Meal List link
        SelectedMealService.MealID = 0;
        //test stuff, may use in the future
        var uri = NavManager.ToAbsoluteUri(NavManager.Uri);
        if (QueryHelpers.ParseQuery(uri.Query).TryGetValue("mealID", out var _id))
        {
            mealID = Convert.ToInt32(_id);
        }
        var uri2 = NavManager.ToAbsoluteUri(NavManager.Uri);
        //NavigationManager.NavigateTo("/mymeal");
        currentUri = uri2.ToString();
    }
#pragma warning restore 1998

    private void getMeals()
    {
        var repo = repoFactory.Get<PMC.Data.MealRepo>();
        var typeOne = repo.GetMealsByMealTypeIDUserID(breakfastMealType, userID);
        mealBreakfast = typeOne.ToList();
        countBreakfast = mealBreakfast.Count() + 3;

        var typeTwo = repo.GetMealsByMealTypeIDUserID(brunchMealType, userID);
        mealBrunch = typeTwo.ToList();
        countBrunch = mealBrunch.Count() + 3;

        var typeThree = repo.GetMealsByMealTypeIDUserID(lunchMealType, userID);
        mealLunch = typeThree.ToList();
        countLunch = mealLunch.Count() + 3;

        var typeFour = repo.GetMealsByMealTypeIDUserID(dinnerMealType, userID);
        mealDinner = typeFour.ToList();
        countDinner = mealDinner.Count() + 3;
    }

    protected void mealSelect(ChangeEventArgs e)
    {
        isOpened = false;
        NavManager.NavigateTo(HomeURIService.HomeUri + "mymeal");
        StateHasChanged();
    }

    protected bool isOpened = false;
    void OpenModal()
    {
        isOpened = true;

    }
    void CloseModal()
    {
        isOpened = false;
    }



#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HomeURIService HomeURIService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private SelectedMealService SelectedMealService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavManager { get; set; }
    }
}
#pragma warning restore 1591
